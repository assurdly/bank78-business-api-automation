pm.test("Status code is 200", function () {
    pm.response.to.have.status(200);
});

var jsonData = pm.response.json();

pm.test("Response has the required fields", function () {
    pm.expect(jsonData).to.be.an('object');
    pm.expect(jsonData.access_token).to.exist;
    pm.expect(jsonData.access_token).to.be.a('string');
    pm.expect(jsonData.expires_in).to.be.an('number');
    pm.expect(jsonData.token_type).to.be.a('string');
    pm.expect(jsonData.refresh_token).to.be.a('string');
    pm.expect(jsonData.scope).to.exist;
});

pm.test("Set access token as an environmental variable", function () {
   pm.environment.set("business_access_token", jsonData.access_token);
});

pm.test("Verify expires_in is 3600", function () {
    pm.expect(jsonData.expires_in).to.eql(3600);
});

pm.test("Verify token_type is Bearer", function () {
    pm.expect(jsonData.token_type).to.eql("Bearer");
});